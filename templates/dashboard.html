{% extends 'base.html' %}

{% block title %}Dashboard - Farout{% endblock %}

{% block content %}
<div class="card">
    <h1>Dashboard</h1>
    <p style="margin-top: 10px; color: #C4DB21;">
        Welcome back, {{ user.username }}!
    </p>
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
    <div class="card">
        <h3>ğŸ‘¥ Members</h3>
        <p style="font-size: 36px; color: #C4DB21; margin-top: 10px;">{{ total_members }}</p>
    </div>
    
    <div class="card">
        <h3>ğŸ‘¤ Your Profile</h3>
        <p style="margin-top: 10px;">
            {% if member %}
                <strong>Rank:</strong> {{ member.rank|title }}<br>
                <strong>Missions:</strong> {{ member.total_missions }}
            {% else %}
                <em style="color: #999;">Not a member yet</em>
            {% endif %}
        </p>
    </div>
    
    <div class="card">
        <h3>ğŸ›¡ï¸ Your Role</h3>
        <p style="margin-top: 10px;">
            {% if user.is_admin %}
                <span style="color: #C4DB21;">Administrator</span>
            {% else %}
                <span>Member</span>
            {% endif %}
        </p>
    </div>
</div>

{% if recent_members %}
<div class="card">
    <h2>Recent Members</h2>
    <div style="margin-top: 20px;">
        {% for member in recent_members %}
        <div style="padding: 10px 0; border-bottom: 1px solid #333;">
            <strong>{{ member.display_name }}</strong>
            <span style="color: #999;"> - {{ member.rank|title }}</span>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

{% if recent_posts %}
<div class="card">
    <h2>Latest News</h2>
    <div style="margin-top: 20px;">
        {% for post in recent_posts %}
        <div style="padding: 15px 0; border-bottom: 1px solid #333;">
            <h3 style="color: #C4DB21;">{{ post.heading }}</h3>
            <p style="color: #999; margin-top: 5px;">{{ post.created_at|date:"F d, Y" }}</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<div class="card">
    <h2>Quick Actions</h2>
    <div style="margin-top: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
        {% if user.is_staff %}
            <a href="/admin/" class="btn">Admin Panel</a>
        {% endif %}
        <a href="/accounts/logout/" class="btn">Logout</a>
    </div>
</div>
{% endblock %}
