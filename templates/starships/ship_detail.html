{% extends 'base.html' %}
{% load static %}

{% block title %}{{ ship.manufacturer.name }} {{ ship.name }} - Far Out Corporation{% endblock %}

{% block content %}
<!-- Breadcrumb Section -->
<div class="breadcrumb-wrapper section-padding bg-cover" style="background-image: url('{% static 'img/breadcrumb.jpg' %}');">
    <div class="container">
        <div class="page-heading">
            <h1 class="wow fadeInUp" data-wow-delay=".3s">{{ ship.name }}</h1>
            <ul class="breadcrumb-items wow fadeInUp" data-wow-delay=".5s">
                <li>
                    <a href="{% url 'home' %}">Home</a>
                </li>
                <li>
                    <i class="fa-sharp fa-solid fa-slash-forward"></i>
                </li>
                <li>
                    <a href="{% url 'starships:ship_list' %}">Ships</a>
                </li>
                <li>
                    <i class="fa-sharp fa-solid fa-slash-forward"></i>
                </li>
                <li>
                    {{ ship.name }}
                </li>
            </ul>
        </div>
    </div>
</div>

<!-- Ship Details Section -->
<section class="project-details-section fix section-padding">
    <div class="container">
        <div class="project-details-wrapper">
            <!-- Ship Header Info -->
            <div class="row g-4 mb-5">
                <div class="col-lg-4">
                    <div class="project-details-content">
                        <h2>{{ ship.manufacturer.name }} {{ ship.name }}</h2>
                        <div class="mt-3">
                            {% if ship.is_flight_ready %}
                            <span class="badge bg-success me-2">
                                <i class="fas fa-check-circle"></i> Flight Ready
                            </span>
                            {% elif ship.is_concept %}
                            <span class="badge bg-warning me-2">
                                <i class="fas fa-pencil-ruler"></i> Concept
                            </span>
                            {% endif %}
                            <span class="badge bg-primary">{{ ship.size|title }}</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 ps-lg-5">
                    <p>
                        {% if ship.description %}
                            {{ ship.description|truncatewords:50 }}
                        {% else %}
                            A {{ ship.type }} manufactured by {{ ship.manufacturer.name }}, designed for versatility and performance in the Star Citizen universe.
                        {% endif %}
                    </p>
                </div>
                <div class="col-lg-4 ps-lg-5">
                    <div class="project-category-items">
                        <ul>
                            <li>
                                Manufacturer: <span>{{ ship.manufacturer.name }}</span>
                            </li>
                            <li>
                                Type: <span>{{ ship.type }}</span>
                            </li>
                            <li>
                                Role: <span>{{ ship.role|default:"Multi-role" }}</span>
                            </li>
                            {% if ship.pledge_price %}
                            <li>
                                Pledge Price: <span>${{ ship.pledge_price }}</span>
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Main Ship Image -->
            {% if ship.image_url %}
            <div class="details-image wow fadeInUp" data-wow-delay=".3s">
                <img src="{{ ship.image_url }}"
                     alt="{{ ship.name }} - {{ ship.manufacturer.name }} starship"
                     class="w-100"
                     loading="lazy"
                     decoding="async"
                     data-placeholder="{% static 'img/placeholder-ship.jpg' %}">
            </div>
            {% endif %}

            <!-- Ship Overview -->
            <div class="project-content-2 wow fadeInUp" data-wow-delay=".4s">
                <h2 class="mb-3">Ship Overview</h2>
                {% if ship.description %}
                <p class="mb-2">
                    {{ ship.description }}
                </p>
                {% else %}
                <p class="mb-2">
                    The {{ ship.manufacturer.name }} {{ ship.name }} is a {{ ship.type }} designed to excel in its designated role.
                    Built with cutting-edge technology and attention to detail, this vessel represents the pinnacle of
                    {{ ship.manufacturer.name }}'s engineering capabilities.
                </p>
                {% endif %}
                <p>
                    Whether you're exploring the outer reaches of known space or engaging in tactical operations,
                    the {{ ship.name }} provides the reliability and performance that pilots demand in the Star Citizen universe.
                </p>
            </div>

            <!-- Specifications Grid -->
            <div class="row g-4 mt-4 mb-4">
                <div class="col-lg-6">
                    <div class="project-details-content-3">
                        <h2 class="mb-3">Dimensions & Capacity</h2>
                        <div class="details-list-items">
                            <ul>
                                {% if ship.length %}
                                <li>
                                    <i class="fa-regular fa-plus"></i>
                                    Length: {{ ship.length }}m
                                </li>
                                {% endif %}
                                {% if ship.beam %}
                                <li>
                                    <i class="fa-regular fa-plus"></i>
                                    Beam: {{ ship.beam }}m
                                </li>
                                {% endif %}
                                {% if ship.height %}
                                <li>
                                    <i class="fa-regular fa-plus"></i>
                                    Height: {{ ship.height }}m
                                </li>
                                {% endif %}
                                {% if ship.cargo_capacity %}
                                <li>
                                    <i class="fa-regular fa-plus"></i>
                                    Cargo: {{ ship.cargo_capacity }} SCU
                                </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="project-details-content-3">
                        <h2 class="mb-3">Crew & Operations</h2>
                        <div class="details-list-items">
                            <ul>
                                {% if ship.min_crew %}
                                <li>
                                    <i class="fa-regular fa-plus"></i>
                                    Min Crew: {{ ship.min_crew }}
                                </li>
                                {% endif %}
                                {% if ship.max_crew %}
                                <li>
                                    <i class="fa-regular fa-plus"></i>
                                    Max Crew: {{ ship.max_crew }}
                                </li>
                                {% endif %}
                                {% if ship.focus %}
                                <li>
                                    <i class="fa-regular fa-plus"></i>
                                    Focus: {{ ship.focus }}
                                </li>
                                {% endif %}
                                {% if ship.production_status %}
                                <li>
                                    <i class="fa-regular fa-plus"></i>
                                    Status: {{ ship.get_production_status_display }}
                                </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Components Section -->
            {% if ship.components.exists %}
            <div class="project-details-content-3 mt-5">
                <h2 class="mb-3">Ship Components</h2>
                <p class="mb-4">
                    The {{ ship.name }} comes equipped with the following components to ensure optimal performance:
                </p>
                <div class="row g-3">
                    {% for component in ship.components.all %}
                    <div class="col-md-6">
                        <div class="card bg-dark text-white border-secondary">
                            <div class="card-body">
                                <h6 class="card-title">
                                    <i class="fas fa-cog text-primary"></i> {{ component.name }}
                                </h6>
                                <p class="card-text mb-0">
                                    <small>
                                        {{ component.get_component_type_display }} - Size {{ component.size }}
                                        {% if component.manufacturer %} | {{ component.manufacturer }}{% endif %}
                                    </small>
                                </p>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Manufacturer Info -->
            <div class="project-details-content-3 mt-5">
                <h2 class="mb-3">About {{ ship.manufacturer.name }}</h2>
                <p>
                    {% if ship.manufacturer.description %}
                        {{ ship.manufacturer.description }}
                    {% else %}
                        {{ ship.manufacturer.name }} is a renowned manufacturer in the Star Citizen universe,
                        known for producing high-quality spacecraft that meet the demanding needs of pilots across the galaxy.
                    {% endif %}
                </p>
            </div>

            <!-- Store Link -->
            {% if ship.store_url %}
            <div class="text-center mt-5 mb-4">
                <a href="{{ ship.store_url }}" target="_blank" class="theme-btn">
                    <i class="fas fa-external-link-alt"></i> View on RSI Store
                </a>
            </div>
            {% endif %}

            <!-- Navigation -->
            <div class="preview-area">
                <div class="preview-item">
                    <a href="{% url 'starships:ship_list' %}">
                        <i class="fa-sharp fa-regular fa-arrow-left"></i> Back to Ship Catalog
                    </a>
                </div>
                {% if ship.store_url %}
                <div class="preview-item style-2">
                    <a href="{{ ship.store_url }}" target="_blank">
                        RSI Store <i class="fa-sharp fa-regular fa-arrow-right"></i>
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="lets-talk-section section-bg fix section-padding pb-0">
    <div class="container">
        <div class="lets-talk-wrapper">
            <h2 class="wow fadeInUp" data-wow-delay=".3s">
                Interested in joining our fleet? <br> Let's fly together!
            </h2>
            <a href="/contact/" class="theme-btn wow fadeInUp" data-wow-delay=".5s">
                Join Far Out Corporation
            </a>
        </div>
    </div>
</section>
{% endblock %}
